<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body {
  background-color: #111;
  color: white;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
}
h1 { color: #4CAF50; }
input, textarea {
  width: 100%;
  padding: 8px;
  margin: 10px 0;
  border-radius: 6px;
  border: none;
  outline: none;
  font-size: 14px;
}
button {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 8px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}
button:hover { background-color: #45a049; }
.revert {
  background-color: #d9534f;
  margin-left: 10px;
}
.revert:hover {
  background-color: #c9302c;
}
#login-box {
  text-align: center;
  margin-top: 100px;
}
#admin-content {
  display: none;
  max-width: 600px;
  margin: auto;
}
label {
  display: block;
  margin-top: 20px;
  font-weight: bold;
}
.group {
  display: flex;
  align-items: center;
  gap: 10px;
}
input[type="color"] {
  width: 60px;
  height: 35px;
  padding: 0;
  border-radius: 4px;
}
</style>
</head>
<body>

<div id="login-box">
  <h2>🔒 Admin Login</h2>
  <input type="password" id="admin-pass" placeholder="Enter password..." />
  <button id="login-btn">Login</button>
</div>

<div id="admin-content">
  <h1>🛠️ Live Site Controls</h1>

  <label>🎨 Background Color:</label>
  <div class="group">
    <input type="color" id="bgColor">
    <button class="revert" id="revert-bg">Revert</button>
  </div>

  <label>🧾 Announcement (HTML supported):</label>
  <div class="group" style="flex-direction: column; align-items: flex-start;">
    <textarea id="announcement" rows="3" placeholder="Enter announcement..."></textarea>
    <button class="revert" id="revert-ann">Revert</button>
  </div>

  <label>😱 Jumpscare Image URL:</label>
  <div class="group">
    <input type="text" id="jumpscareImage" placeholder="https://...">
    <button class="revert" id="revert-jumpimg">Revert</button>
  </div>

  <label>⏱️ Jumpscare Trigger (seconds):</label>
  <div class="group">
    <input type="number" id="jumpscareTrigger" min="0" placeholder="e.g. 10">
    <button class="revert" id="revert-jumptrig">Revert</button>
  </div>

  <br>
  <button id="save">💾 Save Changes</button>
</div>

<!-- Firebase v9 compat build -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
// 🔥 Your Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyC-IDS2wfF3ZgVzjwf0cHUazNGolLFhXVQ",
    authDomain: "mostpopular-39c60.firebaseapp.com",
    databaseURL: "https://mostpopular-39c60-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "mostpopular-39c60",
    storageBucket: "mostpopular-39c60.firebasestorage.app",
    messagingSenderId: "939775132675",
    appId: "1:939775132675:web:7d40bd8fff497c53553a36",
    measurementId: "G-XTTQ03YFN9"
  };

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const settingsRef = db.ref("siteSettings");

// 🔐 Basic admin login
const PASSWORD = "admin123";
document.getElementById("login-btn").onclick = () => {
  const input = document.getElementById("admin-pass").value;
  if (input === PASSWORD) {
    document.getElementById("login-box").style.display = "none";
    document.getElementById("admin-content").style.display = "block";
    loadSettings();
  } else {
    alert("❌ Wrong password!");
  }
};

// Default/original site settings
const defaultSettings = {
  backgroundColor: "#0a0a0a",
  announcement: "",
  jumpscareImage: "",
  jumpscareTrigger: 0
};

// Load Firebase data into form
function loadSettings() {
  settingsRef.once("value").then(snapshot => {
    const s = snapshot.val() || defaultSettings;
    document.getElementById("bgColor").value = s.backgroundColor || defaultSettings.backgroundColor;
    document.getElementById("announcement").value = s.announcement || defaultSettings.announcement;
    document.getElementById("jumpscareImage").value = s.jumpscareImage || defaultSettings.jumpscareImage;
    document.getElementById("jumpscareTrigger").value = s.jumpscareTrigger || defaultSettings.jumpscareTrigger;
  });
}

// Save new settings
document.getElementById("save").onclick = () => {
  const settings = {
    backgroundColor: document.getElementById("bgColor").value,
    announcement: document.getElementById("announcement").value,
    jumpscareImage: document.getElementById("jumpscareImage").value,
    jumpscareTrigger: parseInt(document.getElementById("jumpscareTrigger").value) || 0
  };
  settingsRef.set(settings).then(() => alert("✅ Changes saved & live!"));
};

// Revert buttons
document.getElementById("revert-bg").onclick = () => document.getElementById("bgColor").value = defaultSettings.backgroundColor;
document.getElementById("revert-ann").onclick = () => document.getElementById("announcement").value = defaultSettings.announcement;
document.getElementById("revert-jumpimg").onclick = () => document.getElementById("jumpscareImage").value = defaultSettings.jumpscareImage;
document.getElementById("revert-jumptrig").onclick = () => document.getElementById("jumpscareTrigger").value = defaultSettings.jumpscareTrigger;
</script>
</body>
</html>
